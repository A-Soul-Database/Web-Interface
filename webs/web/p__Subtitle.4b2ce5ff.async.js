(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{37141:function(de,T,n){"use strict";n.d(T,{EQ:function(){return $},VO:function(){return re},Yu:function(){return J},GP:function(){return S}});var Y=n(39459),p=n(21220),X=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/A-Soul-Database/A-Soul-Data@latest"],z=20;T.ZP={RunOnLocal:z!==0,sourceUrl:X[z]};var Q=["scene","staff","type","platform"];function $(s,r){{var c=new Set,_=(0,p.Z)(r.staff),k;try{for(_.s();!(k=_.n()).done;){var o=k.value;if(o!=="F"){var L=(0,p.Z)(r.skin[o]),A;try{for(L.s();!(A=L.n()).done;){var ae=A.value;c.add(ae)}}catch(f){L.e(f)}finally{L.f()}}}}catch(f){_.e(f)}finally{_.f()}var W=Array.from(c);if(W.length!==0&&!j(s.skin,W))return!1}var R=(0,p.Z)(Q),V;try{for(R.s();!(V=R.n()).done;){var q=V.value;if(!j(s[q],r[q]))return!1}}catch(f){R.e(f)}finally{R.f()}if(s.titlestr===""&&s.tagstr===""&&s.typestr===""||r.title.toLowerCase().indexOf(s.titlestr.toLowerCase())!==-1)return!0;{var I=(0,p.Z)(r.tags),K;try{for(I.s();!(K=I.n()).done;){var ee=K.value;if(ee.toLowerCase().indexOf(s.tagstr.toLowerCase())!==-1)return!0}}catch(f){I.e(f)}finally{I.f()}}{var y=(0,p.Z)(r.items),F;try{for(y.s();!(F=y.n()).done;){var te=F.value,b=(0,p.Z)(te.item),G;try{for(b.s();!(G=b.n()).done;){var ne=G.value;if(ne[0].toLowerCase().indexOf(s.typestr.toLowerCase())!==-1)return!0}}catch(f){b.e(f)}finally{b.f()}}}catch(f){y.e(f)}finally{y.f()}}return!1}function re(s){var r=new XMLHttpRequest;r.open("GET",s,!1),r.send(null);var c;try{c=JSON.parse(r.responseText)}catch(_){c={title:"error"}}finally{return c}}function J(s){var r=new XMLHttpRequest;r.open("GET",s,!1),r.send(null);var c;try{c=r.responseText}catch(_){c="error http"}finally{return c}}function S(s){for(var r=[],c=s.length-1;c>=0;c--)r.push(s[c]);return r}function j(s,r){return s.length+r.length!==Array.from(new Set([].concat((0,Y.Z)(s),(0,Y.Z)(r)))).length}},31549:function(de,T,n){"use strict";n.r(T);var Y=n(15629),p=n(55778),X=n(51070),z=n(52645),Q=n(91298),$=n(21220),re=n(14013),J=n(41023),S=n(33384),j=n(87161),s=n(91934),r=n(61400),c=n(17051),_=n(4701),k=n(52916),o=n(34636),L=n(6575),A=n(9962),ae=n(76664),W=n(52212),R=n(77981),V=n(98478),q=n(97594),I=n(8238),K=n(59301),ee=n(40787),y=n(54348),F=n(18999),te=n(89122),b=n(14687),G=n(18422),ne=n(60775),f=n.n(ne),P=n(37141),ce=n(77910),he=n(26710),e=n(37712),Ie=I.Z.Group,ye=V.Z.Panel,be=W.Z.Meta,se=A.Z.Title,ve=A.Z.Text,U=P.ZP.sourceUrl,Ee=(0,P.VO)(U+"/db/2021/search.json"),m=(0,P.VO)(U+"/db/2021/main.json"),fe=(0,P.VO)(U+"/db/2021/indexer.json"),De="yellow";function me(v){var h=fe.indexOf(v);if(m[h].bv!=v)return console.error("indexer.json don't match mainJson in bv fileds, index: "+h),new Array;var u=1,d="";try{u=parseInt(m[h].clip),d=m[h].date.split("-")[0],m[h].date.split("-").length===3&&(d=m[h].date.split("-")[1])}catch(H){console.error("clip and month parse fault in bv: "+v)}if(d===""||u===0)return new Array;d.length===1&&(d="0"+d);for(var t=new Array(u),l=0;l<u;l++)t[l]=[];if(u===1){var a="",i=U+"/db/2021/"+d+"/srt/"+v+".srt";try{a=(0,P.Yu)(i)}catch(H){return console.error("Get subtitles fault on url: "+i),t[0].push("||"),t}for(var C=a.split(`
`),D=0;D<C.length-2;D+=4){var O=C[D]+"|"+C[D+1]+"|"+C[D+2];t[0].push(O)}}else for(var E=1;E<u+1;E++){var M="",g=U+"/db/2021/"+d+"/srt/"+v+"-"+E.toString()+".srt";try{M=(0,P.Yu)(g)}catch(H){console.error("Get subtitles fault on url: "+g),t[E-1].push("||");continue}for(var B=M.split(`
`),x=0;x<B.length-2;x+=4){var N=B[x]+"|"+B[x+1]+"|"+B[x+2];t[E-1].push(N)}}return t}var w=[];for(var Z in m){var le=void 0,oe=void 0,ie=void 0,_e=void 0;try{le=m[Z].title,oe=m[Z].bv,ie=m[Z].date,_e=m[Z].time}catch(v){console.error("mainJson parse fault for n: "+Z)}w.push({key:Z,date:ie,hour:_e,bv:oe,title:le})}w=(0,P.GP)(w);var Ce=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(h){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+h,target:"_blank",onClick:function(d){d.stopPropagation()},children:h})}},{title:"\u6807\u9898",dataIndex:"title",render:function(h){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{md:12,children:h})})}}],xe=function(v){(0,s.Z)(u,v);var h=(0,r.Z)(u);function u(d){var t;return(0,S.Z)(this,u),t=h.call(this,d),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""});var a=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:a,searchWords:"",currentID:0})},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,j.Z)(u,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(W.Z,{onKeyDown:function(a){a.keyCode===13&&t.handleSearch(a)},actions:[(0,e.jsx)(y.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(F.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(te.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(o.Z,{xs:0,md:6}),(0,e.jsx)(o.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(J.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(a){t.setState({input:a.target.value})},value:this.state.input})}),(0,e.jsx)(o.Z,{md:6,align:"middle"})]})]})}}]),u}(K.Component),pe=function(v){(0,s.Z)(u,v);var h=(0,r.Z)(u);function u(d){var t;return(0,S.Z)(this,u),t=h.call(this,d),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var a=[],i=(0,$.Z)(t.props.initDatasrc),C;try{for(i.s();!(C=i.n()).done;){var D=C.value,O=D.bv,E=void 0;try{E=Ee[O].srt}catch(M){continue}E.toLowerCase().indexOf(l.toLowerCase())!==-1&&a.push(D)}}catch(M){i.e(M)}finally{i.f()}t.setState({dataSource:a})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var a=document.getElementsByClassName(l);if(a.length!==0){var i=t.state.currentID;a[i].scrollIntoView({behavior:"smooth"}),i>=a.length-1?t.setState({currentID:0}):t.setState({currentID:i+1})}},t.scrollPre=function(l){var a=document.getElementsByClassName(l);if(a.length!=0){var i=t.state.currentID;a[i].scrollIntoView({behavior:"smooth"}),i<=0?t.setState({currentID:a.length-1}):t.setState({currentID:i-1})}},t}return(0,j.Z)(u,[{key:"handleReverse",value:function(){var t=(0,P.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,a=l.isModalVisible,i=l.displayBV,C=l.searchWords,D=[];return i!==""&&(D=me(i)),(0,e.jsxs)(ee.ZP,{children:[(0,e.jsx)(xe,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(o.Z,{xs:24,md:24,children:(0,e.jsx)(ce.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(E){return{onClick:function(g){t.setState({isModalVisible:!0,displayBV:E.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(Q.Z,{id:"modal",visible:a,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(b.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(G.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(o.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(o.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(o.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(ve,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:D.map(function(O,E){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+i+"?p="+(E+1),children:"\u5207\u7247"+(E+1)})})}),(0,e.jsx)(e.Fragment,{children:O.map(function(M){var g=M.split("|"),B=g[0],x=g[1],N=g[2],H=parseInt(x.split("-->")[0].split(":")[0]),Pe=parseInt(x.split("-->")[0].split(":")[1]),Oe=parseInt(x.split("-->")[0].split(":")[2].split(",")[0]),Me=(H*3600+60*Pe+Oe)*1e3,ge="https://www.bilibili.com/"+i+"?p="+(E+1)+"&start_progress="+Me,ue="";return N.toLowerCase().indexOf(C.toLowerCase())!==-1&&(ue="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},className:ue,children:[(0,e.jsx)(o.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:B}),(0,e.jsx)(o.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:ge,children:x})}),(0,e.jsx)(o.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(f(),{highlightStyle:{backgroundColor:De,padding:0},searchWords:[C],autoEscape:!0,textToHighlight:N})})]})})})})]})})})})]})]})}}]),u}(K.Component);T.default=function(){var v={initColumns:Ce,initDatasrc:w};return(0,e.jsx)(p.ZP,{locale:he.Z,children:(0,e.jsx)(pe,(0,X.Z)({},v))})}}}]);
