(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{8388:function(X,b,n){"use strict";n.d(b,{v:function(){return N}});var A=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/A-Soul-Database/A-Soul-Data/main","https://cdn.jsdelivr.net/gh/A-Soul-Database/A-Soul-Data@latest","https://gitee.com/lairq/A-Soul-Data/raw/main"],g="8001",T="https://apihk.asdb.live/Api/Subtitle_Search/sub_search",j=0,C="https://apihk.asdb.live/Api/List_Json/V1",N={RunOnLocal:j!==0,sourceUrl:A[j],queryAPI:T,MainJsonAPI:C+"/Main_Data",IndexerAPI:C+"/Indexer_Data",SubtitlesAPI:C+"/Srt_Data"}},12061:function(X,b,n){"use strict";n.d(b,{EQ:function(){return j},VO:function(){return C},Yu:function(){return J},GP:function(){return Y}});var A=n(23584),g=n(88424),T=["scene","staff","type","platform"];function j(l,s){{var o=new Set,E=(0,g.Z)(s.staff),O;try{for(E.s();!(O=E.n()).done;){var h=O.value;if(h!=="F"){var L=(0,g.Z)(s.skin[h]),c;try{for(L.s();!(c=L.n()).done;){var $=c.value;o.add($)}}catch(e){L.e(e)}finally{L.f()}}}}catch(e){E.e(e)}finally{E.f()}var W=Array.from(o);if(W.length!==0&&!K(l.skin,W))return!1}var P=(0,g.Z)(T),U;try{for(P.s();!(U=P.n()).done;){var w=U.value;if(!K(l[w],s[w]))return!1}}catch(e){P.e(e)}finally{P.f()}if(l.titlestr===""&&l.tagstr===""&&l.typestr===""||s.title.toLowerCase().indexOf(l.titlestr.toLowerCase())!==-1)return!0;{var Z=(0,g.Z)(s.tags),V;try{for(Z.s();!(V=Z.n()).done;){var H=V.value;if(H.toLowerCase().indexOf(l.tagstr.toLowerCase())!==-1)return!0}}catch(e){Z.e(e)}finally{Z.f()}}{var S=(0,g.Z)(s.items),F;try{for(S.s();!(F=S.n()).done;){var G=F.value,m=(0,g.Z)(G.item),R;try{for(m.s();!(R=m.n()).done;){var k=R.value;if(k[0].toLowerCase().indexOf(l.typestr.toLowerCase())!==-1)return!0}}catch(e){m.e(e)}finally{m.f()}}}catch(e){S.e(e)}finally{S.f()}}return!1}function C(l){var s=new XMLHttpRequest;s.open("GET",l,!1),s.send(null);var o;try{o=JSON.parse(s.responseText)}catch(E){o={title:"error"}}finally{return o}}function N(l,s){var o=new XMLHttpRequest;o.open("POST",l,!1),o.setRequestHeader("Content-Type","application/json");var E=JSON.stringify(s);o.send(E);var O;try{O=JSON.parse(o.responseText)}catch(h){O={title:"error"}}finally{return O}}function J(l){var s=new XMLHttpRequest;s.open("GET",l,!1),s.send(null);var o;if(s.status!==200)throw s.status;try{o=s.responseText}catch(E){throw o="error http",o}finally{return o}}function Y(l){for(var s=[],o=l.length-1;o>=0;o--)s.push(l[o]);return s}function K(l,s){return l.length+s.length!==Array.from(new Set([].concat((0,A.Z)(l),(0,A.Z)(s)))).length}},49793:function(X,b,n){"use strict";n.r(b);var A=n(49426),g=n(91273),T=n(17067),j=n(73667),C=n(1900),N=n(85489),J=n(41132),Y=n(16613),K=n(5981),l=n(73025),s=n(11108),o=n(9882),E=n(62377),O=n(53168),h=n(27274),L=n(30606),c=n(25861),$=n(9916),W=n(90757),P=n(59301),U=n(38219),w=n(54348),Z=n(18999),V=n(89122),H=n(14687),S=n(18422),F=n(60775),G=n.n(F),m=n(12061),R=n(8388),k=n(45504),e=n(37712),Q=W.Z.Title,ee=W.Z.Text,te="yellow";function ne(p){var _=(0,m.VO)(R.v.SubtitlesAPI+"?bv="+p).data;console.log(_);for(var u=0;u<_.sources.length;u++){var d=_.sources[u];console.log("try source:"+d);try{for(var t=Array(_.url.length),r=0;r<_.url.length;r++)t[r]=[];for(var a=0;a<_.url.length;a++){var i=_.url[a],f=d+i,M="";try{M=(0,m.Yu)(f)}catch(I){throw console.error("getSubtitles fail, status:"+I.toString()),d}for(var D=M.split(`
`),v=0;v<D.length-2;v+=4){var y=D[v]+"|"+D[v+1]+"|"+D[v+2];t[a].push(y)}}return t}catch(I){console.warn("source: "+d+" cannnot be used, try next source");continue}}console.error("All sources cannot be used!");for(var x=Array(_.url.length),B=0;B<_.url.length;B++)x[B]=[];return x}var re=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(_){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+_,target:"_blank",onClick:function(d){d.stopPropagation()},children:_})}},{title:"\u6807\u9898",dataIndex:"title",render:function(_){return(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{md:12,children:_})})}}],ae=function(p){(0,o.Z)(u,p);var _=(0,E.Z)(u);function u(d){var t;return(0,l.Z)(this,u),t=_.call(this,d),t.state={input:""},t.handleSearch=function(r){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(r){t.setState({input:""});var a=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:a,searchWords:"",currentID:0})},t.handleReverse=function(r){t.props.parent.handleReverse()},t}return(0,s.Z)(u,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(J.Z,{onKeyDown:function(a){a.keyCode===13&&t.handleSearch(a)},actions:[(0,e.jsx)(w.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(Z.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(V.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(Q,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(h.Z,{style:{height:"50px"},children:[(0,e.jsx)(c.Z,{xs:0,md:6}),(0,e.jsx)(c.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(K.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(a){t.setState({input:a.target.value})},value:this.state.input})}),(0,e.jsx)(c.Z,{md:6,align:"middle"})]})]})}}]),u}(P.Component),se=function(p){(0,o.Z)(u,p);var _=(0,E.Z)(u);function u(d){var t;return(0,l.Z)(this,u),t=_.call(this,d),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(r){t.setState({searchWords:r}),fetch("".concat(R.v.queryAPI),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({words:r})}).then(function(a){a.json().then(function(i){t.setState({dataSource:i});var f=i.length;C.default.info("\u5171"+f.toString()+"\u6761\u641C\u7D22\u7ED3\u679C\u5DF2\u5C55\u793A")})},function(a){console.error(a),C.default.error("\u5B57\u5E55\u5E93\u641C\u7D22\u5931\u8D25")})},t.scrollTop=function(){var r=document.getElementById("Table-top");r.scrollIntoView({behavior:"auto"})},t.scrollNext=function(r){var a=document.getElementsByClassName(r);if(a.length!==0){var i=t.state.currentID;a[i].scrollIntoView({behavior:"smooth"}),i>=a.length-1?t.setState({currentID:0}):t.setState({currentID:i+1})}},t.scrollPre=function(r){var a=document.getElementsByClassName(r);if(a.length!=0){var i=t.state.currentID;a[i].scrollIntoView({behavior:"smooth"}),i<=0?t.setState({currentID:a.length-1}):t.setState({currentID:i-1})}},t}return(0,s.Z)(u,[{key:"componentDidUpdate",value:function(){var t=this.props,r=t.reRender,a=t.parent,i=t.initDatasrc;r&&(this.setState({dataSource:i}),a.setState({reRender:!1}))}},{key:"handleReverse",value:function(){var t=(0,m.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,r=this.state,a=r.isModalVisible,i=r.displayBV,f=r.searchWords,M=[];return i!==""&&(M=ne(i)),(0,e.jsxs)(U.ZP,{children:[(0,e.jsx)(ae,{parent:this}),(0,e.jsx)(h.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(c.Z,{xs:24,md:24,children:(0,e.jsx)(k.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(v){return{onClick:function(x){t.setState({isModalVisible:!0,displayBV:v.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(T.Z,{id:"modal",visible:a,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(Q,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(H.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(S.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(c.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(c.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(c.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(h.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(ee,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:M.map(function(D,v){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z,{children:(0,e.jsx)(c.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+i+"?p="+(v+1),children:"\u5207\u7247"+(v+1)})})}),(0,e.jsx)(e.Fragment,{children:D.map(function(y){var x=y.split("|"),B=x[0],I=x[1],z=x[2],oe=parseInt(I.split("-->")[0].split(":")[0]),ie=parseInt(I.split("-->")[0].split(":")[1]),ue=parseInt(I.split("-->")[0].split(":")[2].split(",")[0]),_e=(oe*3600+60*ie+ue)*1e3,de="https://www.bilibili.com/"+i+"?p="+(v+1)+"&start_progress="+_e,q="";return z.toLowerCase().indexOf(f.toLowerCase())!==-1&&(q="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(h.Z,{style:{borderBottom:"1px dashed"},className:q,children:[(0,e.jsx)(c.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:B}),(0,e.jsx)(c.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:de,children:I})}),(0,e.jsx)(c.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(G(),{highlightStyle:{backgroundColor:te,padding:0},searchWords:[f],autoEscape:!0,textToHighlight:z})})]})})})})]})})})})]})]})}}]),u}(P.Component),le=function(p){(0,o.Z)(u,p);var _=(0,E.Z)(u);function u(){var d;(0,l.Z)(this,u);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return d=_.call.apply(_,[this].concat(r)),d.state={mainJson:[],indexerList:[],reRender:!1},d}return(0,s.Z)(u,[{key:"cancelRerender",value:function(){this.setState({reRender:!1}),console.log("\u5DF2\u53D6\u6D88")}},{key:"componentDidMount",value:function(){var t=this;fetch(R.v.MainJsonAPI).then(function(r){return r.json().then(function(a){t.setState({mainJson:a.data,reRender:!0}),console.log("mainJson\u83B7\u53D6\u6210\u529F")})},function(r){console.error(r)})}},{key:"render",value:function(){var t=this.state,r=t.mainJson,a=t.reRender,i=[];for(var f in r){var M=void 0,D=void 0,v=void 0,y=void 0;try{M=r[f].title,D=r[f].bv,v=r[f].date,y=r[f].time}catch(B){console.error("mainJson parse fault for n: "+f)}i.push({key:f,date:v,hour:y,bv:D,title:M})}i=(0,m.GP)(i);var x={initColumns:re,initDatasrc:i,reRender:a,parent:this};return(0,e.jsx)(se,(0,A.Z)({},x))}}]),u}(P.Component);b.default=le}}]);
