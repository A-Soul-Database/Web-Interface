(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{37141:function(xe,L,r){"use strict";r.d(L,{EQ:function(){return _e},VO:function(){return q},Yu:function(){return V},GP:function(){return z}});var X=r(61046),P=r(91660),J=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/A-Soul-Database/A-Soul-Data@latest"],Q=0;L.ZP={RunOnLocal:Q!==0,sourceUrl:J[Q]};var $=["scene","staff","type","platform"];function _e(l,o){{var n=new Set,g=(0,P.Z)(o.staff),_;try{for(g.s();!(_=g.n()).done;){var U=_.value;if(U!=="F"){var A=(0,P.Z)(o.skin[U]),W;try{for(A.s();!(W=A.n()).done;){var ie=W.value;n.add(ie)}}catch(v){A.e(v)}finally{A.f()}}}}catch(v){g.e(v)}finally{g.f()}var R=Array.from(n);if(R.length!==0&&!T(l.skin,R))return!1}var K=(0,P.Z)($),F;try{for(K.s();!(F=K.n()).done;){var ee=F.value;if(!T(l[ee],o[ee]))return!1}}catch(v){K.e(v)}finally{K.f()}if(l.titlestr===""&&l.tagstr===""&&l.typestr===""||o.title.toLowerCase().indexOf(l.titlestr.toLowerCase())!==-1)return!0;{var I=(0,P.Z)(o.tags),S;try{for(I.s();!(S=I.n()).done;){var te=S.value;if(te.toLowerCase().indexOf(l.tagstr.toLowerCase())!==-1)return!0}}catch(v){I.e(v)}finally{I.f()}}{var b=(0,P.Z)(o.items),G;try{for(b.s();!(G=b.n()).done;){var re=G.value,Z=(0,P.Z)(re.item),w;try{for(Z.s();!(w=Z.n()).done;){var ne=w.value;if(ne[0].toLowerCase().indexOf(l.typestr.toLowerCase())!==-1)return!0}}catch(v){Z.e(v)}finally{Z.f()}}}catch(v){b.e(v)}finally{b.f()}}return!1}function q(l){var o=new XMLHttpRequest;o.open("GET",l,!1),o.send(null);var n;try{n=JSON.parse(o.responseText)}catch(g){n={title:"error"}}finally{return n}}function V(l){var o=new XMLHttpRequest;o.open("GET",l,!1),o.send(null);var n;try{n=o.responseText}catch(g){n="error http"}finally{return n}}function z(l){for(var o=[],n=l.length-1;n>=0;n--)o.push(l[n]);return o}function T(l,o){return l.length+o.length!==Array.from(new Set([].concat((0,X.Z)(l),(0,X.Z)(o)))).length}},31549:function(xe,L,r){"use strict";r.r(L);var X=r(55398),P=r(38455),J=r(72438),Q=r(54394),$=r(38542),_e=r(16737),q=r(72290),V=r(33575),z=r(8365),T=r(15770),l=r(28446),o=r(76699),n=r(57022),g=r(96552),_=r(94916),U=r(91660),A=r(13996),W=r(52294),ie=r(69907),R=r(18114),K=r(5624),F=r(74782),ee=r(89260),I=r(18665),S=r(59301),te=r(16362),b=r(54348),G=r(18999),re=r(89122),Z=r(14687),w=r(18422),ne=r(60775),v=r.n(ne),C=r(37141),Pe=r(630),Oe=r(78301),e=r(37712),Ae=I.Z.Group,We=F.Z.Panel,Re=R.Z.Meta,de=W.Z.Title,Me=W.Z.Text,B=C.ZP.sourceUrl,ge=(0,C.VO)(B+"/db/main.json"),ye=ge.LiveClip,ue="",ce="",he="",ae=[],E=[],se=[],N=(0,U.Z)(ye),ve;try{for(N.s();!(ve=N.n()).done;){var le=ve.value;ue=B+"/db/"+le+"/main.json",ce=B+"/db/"+le+"/search.json",he=B+"/db/"+le+"/indexer.json",E=E.concat((0,C.VO)(ue)),se=se.concat((0,C.VO)(ce)),ae=ae.concat((0,C.VO)(he))}}catch(u){N.e(u)}finally{N.f()}var Ie="yellow";function Ee(u){return"20"+u}function be(u){var h=ae.indexOf(u);if(E[h].bv!=u)return console.error("indexer.json don't match mainJson in bv fileds, index: "+h),new Array;var d=1,c="",t="";try{d=parseInt(E[h].clip),c=E[h].date.split("-")[1],t=Ee("21"),E[h].date.split("-").length===3&&(c=E[h].date.split("-")[1],t=Ee(E[h].date.split("-")[0]))}catch(H){console.error("clip and month parse fault in bv: "+u)}if(c===""||d===0)return new Array;c.length===1&&(c="0"+c);for(var a=new Array(d),s=0;s<d;s++)a[s]=[];if(d===1){var i="",O=B+"/db/"+t+"/"+c+"/srt/"+u+".srt";try{i=(0,C.Yu)(O)}catch(H){return console.error("Get subtitles fault on url: "+O),a[0].push("||"),a}for(var p=i.split(`
`),f=0;f<p.length-2;f+=4){var m=p[f]+"|"+p[f+1]+"|"+p[f+2];a[0].push(m)}}else for(var D=1;D<d+1;D++){var y="",Y=B+"/db/"+t+"/"+c+"/srt/"+u+"-"+D.toString()+".srt";try{y=(0,C.Yu)(Y)}catch(H){console.error("Get subtitles fault on url: "+Y),a[D-1].push("||");continue}for(var x=y.split(`
`),M=0;M<x.length-2;M+=4){var oe=x[M]+"|"+x[M+1]+"|"+x[M+2];a[D-1].push(oe)}}return a}var k=[];for(var j in E){var fe=void 0,De=void 0,pe=void 0,me=void 0;try{fe=E[j].title,De=E[j].bv,pe=E[j].date,me=E[j].time}catch(u){console.error("mainJson parse fault for n: "+j)}k.push({key:j,date:pe,hour:me,bv:De,title:fe})}k=(0,C.GP)(k);var Ze=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(h){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+h,target:"_blank",onClick:function(c){c.stopPropagation()},children:h})}},{title:"\u6807\u9898",dataIndex:"title",render:function(h){return(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{md:12,children:h})})}}],Be=function(u){(0,T.Z)(d,u);var h=(0,l.Z)(d);function d(c){var t;return(0,V.Z)(this,d),t=h.call(this,c),t.state={input:""},t.handleSearch=function(a){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(a){t.setState({input:""});var s=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:s,searchWords:"",currentID:0})},t.handleReverse=function(a){t.props.parent.handleReverse()},t}return(0,z.Z)(d,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(R.Z,{onKeyDown:function(s){s.keyCode===13&&t.handleSearch(s)},actions:[(0,e.jsx)(b.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(G.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(re.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(de,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(n.Z,{style:{height:"50px"},children:[(0,e.jsx)(_.Z,{xs:0,md:6}),(0,e.jsx)(_.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(q.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(s){t.setState({input:s.target.value})},value:this.state.input})}),(0,e.jsx)(_.Z,{md:6,align:"middle"})]})]})}}]),d}(S.Component),je=function(u){(0,T.Z)(d,u);var h=(0,l.Z)(d);function d(c){var t;return(0,V.Z)(this,d),t=h.call(this,c),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(a){t.setState({searchWords:a});var s=[],i=(0,U.Z)(t.props.initDatasrc),O;try{for(i.s();!(O=i.n()).done;){var p=O.value,f=p.bv,m=void 0;try{m=se[f].srt}catch(D){continue}m.toLowerCase().indexOf(a.toLowerCase())!==-1&&s.push(p)}}catch(D){i.e(D)}finally{i.f()}t.setState({dataSource:s})},t.scrollTop=function(){var a=document.getElementById("Table-top");a.scrollIntoView({behavior:"auto"})},t.scrollNext=function(a){var s=document.getElementsByClassName(a);if(s.length!==0){var i=t.state.currentID;s[i].scrollIntoView({behavior:"smooth"}),i>=s.length-1?t.setState({currentID:0}):t.setState({currentID:i+1})}},t.scrollPre=function(a){var s=document.getElementsByClassName(a);if(s.length!=0){var i=t.state.currentID;s[i].scrollIntoView({behavior:"smooth"}),i<=0?t.setState({currentID:s.length-1}):t.setState({currentID:i-1})}},t}return(0,z.Z)(d,[{key:"handleReverse",value:function(){var t=(0,C.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,a=this.state,s=a.isModalVisible,i=a.displayBV,O=a.searchWords,p=[];return i!==""&&(p=be(i)),(0,e.jsxs)(te.ZP,{children:[(0,e.jsx)(Be,{parent:this}),(0,e.jsx)(n.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(_.Z,{xs:24,md:24,children:(0,e.jsx)(Pe.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(m){return{onClick:function(y){t.setState({isModalVisible:!0,displayBV:m.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)($.Z,{id:"modal",visible:s,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(de,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(Z.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(w.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(n.Z,{children:[(0,e.jsx)(_.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(_.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(_.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(n.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(Me,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:p.map(function(f,m){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.Z,{children:(0,e.jsx)(_.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+i+"?p="+(m+1),children:"\u5207\u7247"+(m+1)})})}),(0,e.jsx)(e.Fragment,{children:f.map(function(D){var y=D.split("|"),Y=y[0],x=y[1],M=y[2],oe=parseInt(x.split("-->")[0].split(":")[0]),H=parseInt(x.split("-->")[0].split(":")[1]),Le=parseInt(x.split("-->")[0].split(":")[2].split(",")[0]),Te=(oe*3600+60*H+Le)*1e3,Ue="https://www.bilibili.com/"+i+"?p="+(m+1)+"&start_progress="+Te,Ce="";return M.toLowerCase().indexOf(O.toLowerCase())!==-1&&(Ce="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(n.Z,{style:{borderBottom:"1px dashed"},className:Ce,children:[(0,e.jsx)(_.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:Y}),(0,e.jsx)(_.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ue,children:x})}),(0,e.jsx)(_.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(v(),{highlightStyle:{backgroundColor:Ie,padding:0},searchWords:[O],autoEscape:!0,textToHighlight:M})})]})})})})]})})})})]})]})}}]),d}(S.Component);L.default=function(){var u={initColumns:Ze,initDatasrc:k};return(0,e.jsx)(P.ZP,{locale:Oe.Z,children:(0,e.jsx)(je,(0,J.Z)({},u))})}}}]);
