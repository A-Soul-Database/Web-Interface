(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{37141:function(ue,T,n){"use strict";n.d(T,{EQ:function(){return Q},VO:function(){return re},Yu:function(){return $},GP:function(){return S}});var k=n(61046),x=n(91660),H=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/A-Soul-Database/A-Soul-Data@latest"],Y=2;T.ZP={RunOnLocal:Y!==0,sourceUrl:H[Y]};var X=["scene","staff","type"];function Q(a,r){{var c=new Set,i=(0,x.Z)(r.staff),J;try{for(i.s();!(J=i.n()).done;){var o=J.value;if(o!=="F"){var j=(0,x.Z)(r.skin[o]),A;try{for(j.s();!(A=j.n()).done;){var ae=A.value;c.add(ae)}}catch(f){j.e(f)}finally{j.f()}}}}catch(f){i.e(f)}finally{i.f()}var W=Array.from(c);if(W.length!==0&&!L(a.skin,W))return!1}if(a.platform.indexOf(r.platform)===-1)return!1;var U=(0,x.Z)(X),z;try{for(U.s();!(z=U.n()).done;){var q=z.value;if(!L(a[q],r[q]))return!1}}catch(f){U.e(f)}finally{U.f()}if(a.titlestr===""&&a.tagstr===""&&a.typestr===""||r.title.toLowerCase().indexOf(a.titlestr.toLowerCase())!==-1)return!0;{var I=(0,x.Z)(r.tags),R;try{for(I.s();!(R=I.n()).done;){var ee=R.value;if(ee.toLowerCase().indexOf(a.tagstr.toLowerCase())!==-1)return!0}}catch(f){I.e(f)}finally{I.f()}}{var y=(0,x.Z)(r.items),V;try{for(y.s();!(V=y.n()).done;){var te=V.value,b=(0,x.Z)(te.item),F;try{for(b.s();!(F=b.n()).done;){var ne=F.value;if(ne[0].toLowerCase().indexOf(a.typestr.toLowerCase())!==-1)return!0}}catch(f){b.e(f)}finally{b.f()}}}catch(f){y.e(f)}finally{y.f()}}return!1}function re(a){var r=new XMLHttpRequest;r.open("GET",a,!1),r.send(null);var c;try{c=JSON.parse(r.responseText)}catch(i){c={title:"error"}}finally{return c}}function $(a){var r=new XMLHttpRequest;r.open("GET",a,!1),r.send(null);var c;try{c=r.responseText}catch(i){c="error http"}finally{return c}}function S(a){for(var r=[],c=a.length-1;c>=0;c--)r.push(a[c]);return r}function L(a,r){return a.length+r.length!==Array.from(new Set([].concat((0,k.Z)(a),(0,k.Z)(r)))).length}},31549:function(ue,T,n){"use strict";n.r(T);var k=n(55398),x=n(38455),H=n(72438),Y=n(54394),X=n(38542),Q=n(91660),re=n(16737),$=n(72290),S=n(33575),L=n(8365),a=n(15770),r=n(28446),c=n(76699),i=n(57022),J=n(96552),o=n(94916),j=n(13996),A=n(52294),ae=n(69907),W=n(18114),U=n(5624),z=n(74782),q=n(89260),I=n(18665),R=n(59301),ee=n(43469),y=n(54348),V=n(18999),te=n(89122),b=n(14687),F=n(18422),ne=n(60775),f=n.n(ne),P=n(37141),ce=n(86583),he=n(78301),e=n(37712),Ie=I.Z.Group,ye=z.Z.Panel,be=W.Z.Meta,se=A.Z.Title,ve=A.Z.Text,K=P.ZP.sourceUrl,Ee=(0,P.VO)(K+"/db/2021/search.json"),p=(0,P.VO)(K+"/db/2021/main.json"),fe=(0,P.VO)(K+"/db/2021/indexer.json"),De="yellow";function pe(v){var h=fe.indexOf(v);if(p[h].bv!=v)return console.error("indexer.json don't match mainJson in bv fileds, index: "+h),new Array;var d=1,u="";try{d=parseInt(p[h].clip),u=p[h].date.split("-")[0],p[h].date.split("-").length===3&&(u=p[h].date.split("-")[1])}catch(N){console.error("clip and month parse fault in bv: "+v)}if(u===""||d===0)return new Array;u.length===1&&(u="0"+u);for(var t=new Array(d),l=0;l<d;l++)t[l]=[];if(d===1){var s="",_=K+"/db/2021/"+u+"/srt/"+v+".srt";try{s=(0,P.Yu)(_)}catch(N){return console.error("Get subtitles fault on url: "+_),t[0].push("||"),t}for(var m=s.split(`
`),D=0;D<m.length-2;D+=4){var O=m[D]+"|"+m[D+1]+"|"+m[D+2];t[0].push(O)}}else for(var E=1;E<d+1;E++){var M="",g=K+"/db/2021/"+u+"/srt/"+v+"-"+E.toString()+".srt";try{M=(0,P.Yu)(g)}catch(N){console.error("Get subtitles fault on url: "+g),t[E-1].push("||");continue}for(var B=M.split(`
`),C=0;C<B.length-2;C+=4){var w=B[C]+"|"+B[C+1]+"|"+B[C+2];t[E-1].push(w)}}return t}var G=[];for(var Z in p){var le=void 0,oe=void 0,_e=void 0,ie=void 0;try{le=p[Z].title,oe=p[Z].bv,_e=p[Z].date,ie=p[Z].time}catch(v){console.error("mainJson parse fault for n: "+Z)}G.push({key:Z,date:_e,hour:ie,bv:oe,title:le})}G=(0,P.GP)(G);var me=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(h){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+h,target:"_blank",onClick:function(u){u.stopPropagation()},children:h})}},{title:"\u6807\u9898",dataIndex:"title",render:function(h){return(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{md:12,children:h})})}}],Ce=function(v){(0,a.Z)(d,v);var h=(0,r.Z)(d);function d(u){var t;return(0,S.Z)(this,d),t=h.call(this,u),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""});var s=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:s,searchWords:"",currentID:0})},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,L.Z)(d,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(W.Z,{onKeyDown:function(s){s.keyCode===13&&t.handleSearch(s)},actions:[(0,e.jsx)(y.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(V.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(te.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(i.Z,{style:{height:"50px"},children:[(0,e.jsx)(o.Z,{xs:0,md:6}),(0,e.jsx)(o.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)($.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(s){t.setState({input:s.target.value})},value:this.state.input})}),(0,e.jsx)(o.Z,{md:6,align:"middle"})]})]})}}]),d}(R.Component),xe=function(v){(0,a.Z)(d,v);var h=(0,r.Z)(d);function d(u){var t;return(0,S.Z)(this,d),t=h.call(this,u),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var s=[],_=(0,Q.Z)(t.props.initDatasrc),m;try{for(_.s();!(m=_.n()).done;){var D=m.value,O=D.bv,E=void 0;try{E=Ee[O].srt}catch(M){continue}E.toLowerCase().indexOf(l.toLowerCase())!==-1&&s.push(D)}}catch(M){_.e(M)}finally{_.f()}t.setState({dataSource:s})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var s=document.getElementsByClassName(l);if(s.length!==0){var _=t.state.currentID;s[_].scrollIntoView({behavior:"smooth"}),_>=s.length-1?t.setState({currentID:0}):t.setState({currentID:_+1})}},t.scrollPre=function(l){var s=document.getElementsByClassName(l);if(s.length!=0){var _=t.state.currentID;s[_].scrollIntoView({behavior:"smooth"}),_<=0?t.setState({currentID:s.length-1}):t.setState({currentID:_-1})}},t}return(0,L.Z)(d,[{key:"handleReverse",value:function(){var t=(0,P.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,s=l.isModalVisible,_=l.displayBV,m=l.searchWords,D=[];return _!==""&&(D=pe(_)),(0,e.jsxs)(ee.ZP,{children:[(0,e.jsx)(Ce,{parent:this}),(0,e.jsx)(i.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(o.Z,{xs:24,md:24,children:(0,e.jsx)(ce.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(E){return{onClick:function(g){t.setState({isModalVisible:!0,displayBV:E.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(X.Z,{id:"modal",visible:s,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(b.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(F.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(o.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(o.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(o.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(i.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(ve,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:D.map(function(O,E){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z,{children:(0,e.jsx)(o.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+_+"?p="+(E+1),children:"\u5207\u7247"+(E+1)})})}),(0,e.jsx)(e.Fragment,{children:O.map(function(M){var g=M.split("|"),B=g[0],C=g[1],w=g[2],N=parseInt(C.split("-->")[0].split(":")[0]),Pe=parseInt(C.split("-->")[0].split(":")[1]),Oe=parseInt(C.split("-->")[0].split(":")[2].split(",")[0]),Me=(N*3600+60*Pe+Oe)*1e3,ge="https://www.bilibili.com/"+_+"?p="+(E+1)+"&start_progress="+Me,de="";return w.toLowerCase().indexOf(m.toLowerCase())!==-1&&(de="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{style:{borderBottom:"1px dashed"},className:de,children:[(0,e.jsx)(o.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:B}),(0,e.jsx)(o.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:ge,children:C})}),(0,e.jsx)(o.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(f(),{highlightStyle:{backgroundColor:De,padding:0},searchWords:[m],autoEscape:!0,textToHighlight:w})})]})})})})]})})})})]})]})}}]),d}(R.Component);T.default=function(){var v={initColumns:me,initDatasrc:G};return(0,e.jsx)(x.ZP,{locale:he.Z,children:(0,e.jsx)(xe,(0,H.Z)({},v))})}}}]);
