(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{37141:function(Ce,L,r){"use strict";r.d(L,{EQ:function(){return ie},VO:function(){return q},Yu:function(){return V},GP:function(){return F}});var J=r(61046),P=r(91660),Q=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/A-Soul-Database/A-Soul-Data@latest"],$=2;L.ZP={RunOnLocal:$!==0,sourceUrl:Q[$]};var k=["scene","staff","type","platform"];function ie(l,o){{var n=new Set,g=(0,P.Z)(o.staff),i;try{for(g.s();!(i=g.n()).done;){var A=i.value;if(A!=="F"){var W=(0,P.Z)(o.skin[A]),R;try{for(W.s();!(R=W.n()).done;){var _e=R.value;n.add(_e)}}catch(v){W.e(v)}finally{W.f()}}}}catch(v){g.e(v)}finally{g.f()}var U=Array.from(n);if(U.length!==0&&!T(l.skin,U))return!1}var K=(0,P.Z)(k),G;try{for(K.s();!(G=K.n()).done;){var ee=G.value;if(!T(l[ee],o[ee]))return!1}}catch(v){K.e(v)}finally{K.f()}if(l.titlestr===""&&l.tagstr===""&&l.typestr===""||o.title.toLowerCase().indexOf(l.titlestr.toLowerCase())!==-1)return!0;{var I=(0,P.Z)(o.tags),S;try{for(I.s();!(S=I.n()).done;){var te=S.value;if(te.toLowerCase().indexOf(l.tagstr.toLowerCase())!==-1)return!0}}catch(v){I.e(v)}finally{I.f()}}{var b=(0,P.Z)(o.items),w;try{for(b.s();!(w=b.n()).done;){var re=w.value,Z=(0,P.Z)(re.item),N;try{for(Z.s();!(N=Z.n()).done;){var ne=N.value;if(ne[0].toLowerCase().indexOf(l.typestr.toLowerCase())!==-1)return!0}}catch(v){Z.e(v)}finally{Z.f()}}}catch(v){b.e(v)}finally{b.f()}}return!1}function q(l){var o=new XMLHttpRequest;o.open("GET",l,!1),o.send(null);var n;try{n=JSON.parse(o.responseText)}catch(g){n={title:"error"}}finally{return n}}function V(l){var o=new XMLHttpRequest;o.open("GET",l,!1),o.send(null);var n;try{n=o.responseText}catch(g){n="error http"}finally{return n}}function F(l){for(var o=[],n=l.length-1;n>=0;n--)o.push(l[n]);return o}function T(l,o){return l.length+o.length!==Array.from(new Set([].concat((0,J.Z)(l),(0,J.Z)(o)))).length}},31549:function(Ce,L,r){"use strict";r.r(L);var J=r(29442),P=r(434),Q=r(72438),$=r(67255),k=r(61716),ie=r(70547),q=r(15380),V=r(33575),F=r(8365),T=r(15770),l=r(28446),o=r(85911),n=r(42151),g=r(55606),i=r(10219),A=r(91660),W=r(35502),R=r(14730),_e=r(21250),U=r(41908),K=r(3275),G=r(18034),ee=r(79753),I=r(36938),S=r(59301),te=r(73242),b=r(54348),w=r(18999),re=r(89122),Z=r(14687),N=r(18422),ne=r(60775),v=r.n(ne),x=r(37141),Pe=r(35431),Oe=r(71198),e=r(37712),We=I.Z.Group,Re=G.Z.Panel,Ue=U.Z.Meta,de=R.Z.Title,Me=R.Z.Text,j=x.ZP.sourceUrl,ge=(0,x.VO)(j+"/db/main.json"),ye=ge.LiveClip,ue="",ce="",he="",ae=[],E=[],se=[],Y=(0,A.Z)(ye),ve;try{for(Y.s();!(ve=Y.n()).done;){var le=ve.value;ue=j+"/db/"+le+"/main.json",ce=j+"/db/"+le+"/search.json",he=j+"/db/"+le+"/indexer.json",E=E.concat((0,x.VO)(ue)),se=se.concat((0,x.VO)(ce)),ae=ae.concat((0,x.VO)(he))}}catch(u){Y.e(u)}finally{Y.f()}var Ie="yellow";function Ee(u){return"20"+u}function be(u){var h=ae.indexOf(u);if(E[h].bv!=u)return console.error("indexer.json don't match mainJson in bv fileds, index: "+h),new Array;var d=1,c="",t="";try{d=parseInt(E[h].clip),c=E[h].date.split("-")[1],t=Ee("21"),E[h].date.split("-").length===3&&(c=E[h].date.split("-")[1],t=Ee(E[h].date.split("-")[0]))}catch(z){console.error("clip and month parse fault in bv: "+u)}if(c===""||d===0)return new Array;c.length===1&&(c="0"+c);for(var a=new Array(d),s=0;s<d;s++)a[s]=[];if(d===1){var _="",O=j+"/db/"+t+"/"+c+"/srt/"+u+".srt";try{_=(0,x.Yu)(O)}catch(z){return console.error("Get subtitles fault on url: "+O),a[0].push("||"),a}for(var m=_.split(`
`),f=0;f<m.length-2;f+=4){var p=m[f]+"|"+m[f+1]+"|"+m[f+2];a[0].push(p)}}else for(var D=1;D<d+1;D++){var y="",X=j+"/db/"+t+"/"+c+"/srt/"+u+"-"+D.toString()+".srt";try{y=(0,x.Yu)(X)}catch(z){console.error("Get subtitles fault on url: "+X),a[D-1].push("||");continue}for(var C=y.split(`
`),M=0;M<C.length-2;M+=4){var oe=C[M]+"|"+C[M+1]+"|"+C[M+2];a[D-1].push(oe)}}return a}var H=[];for(var B in E){var fe=void 0,De=void 0,me=void 0,pe=void 0;try{fe=E[B].title,De=E[B].bv,me=E[B].date,pe=E[B].time}catch(u){console.error("mainJson parse fault for n: "+B)}H.push({key:B,date:me,hour:pe,bv:De,title:fe})}H=(0,x.GP)(H);var Ze=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(h){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+h,target:"_blank",onClick:function(c){c.stopPropagation()},children:h})}},{title:"\u6807\u9898",dataIndex:"title",render:function(h){return(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{md:12,children:h})})}}],je=function(u){(0,T.Z)(d,u);var h=(0,l.Z)(d);function d(c){var t;return(0,V.Z)(this,d),t=h.call(this,c),t.state={input:""},t.handleSearch=function(a){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(a){t.setState({input:""});var s=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:s,searchWords:"",currentID:0})},t.handleReverse=function(a){t.props.parent.handleReverse()},t}return(0,F.Z)(d,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(U.Z,{onKeyDown:function(s){s.keyCode===13&&t.handleSearch(s)},actions:[(0,e.jsx)(b.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(w.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(re.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(de,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(n.Z,{style:{height:"50px"},children:[(0,e.jsx)(i.Z,{xs:0,md:6}),(0,e.jsx)(i.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(q.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(s){t.setState({input:s.target.value})},value:this.state.input})}),(0,e.jsx)(i.Z,{md:6,align:"middle"})]})]})}}]),d}(S.Component),Be=function(u){(0,T.Z)(d,u);var h=(0,l.Z)(d);function d(c){var t;return(0,V.Z)(this,d),t=h.call(this,c),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(a){t.setState({searchWords:a});var s=[],_=(0,A.Z)(t.props.initDatasrc),O;try{for(_.s();!(O=_.n()).done;){var m=O.value,f=m.bv,p=void 0;try{p=se[f].srt}catch(D){continue}p.toLowerCase().indexOf(a.toLowerCase())!==-1&&s.push(m)}}catch(D){_.e(D)}finally{_.f()}t.setState({dataSource:s})},t.scrollTop=function(){var a=document.getElementById("Table-top");a.scrollIntoView({behavior:"auto"})},t.scrollNext=function(a){var s=document.getElementsByClassName(a);if(s.length!==0){var _=t.state.currentID;s[_].scrollIntoView({behavior:"smooth"}),_>=s.length-1?t.setState({currentID:0}):t.setState({currentID:_+1})}},t.scrollPre=function(a){var s=document.getElementsByClassName(a);if(s.length!=0){var _=t.state.currentID;s[_].scrollIntoView({behavior:"smooth"}),_<=0?t.setState({currentID:s.length-1}):t.setState({currentID:_-1})}},t}return(0,F.Z)(d,[{key:"handleReverse",value:function(){var t=(0,x.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,a=this.state,s=a.isModalVisible,_=a.displayBV,O=a.searchWords,m=[];return _!==""&&(m=be(_)),(0,e.jsxs)(te.ZP,{children:[(0,e.jsx)(je,{parent:this}),(0,e.jsx)(n.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(i.Z,{xs:24,md:24,children:(0,e.jsx)(Pe.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(p){return{onClick:function(y){t.setState({isModalVisible:!0,displayBV:p.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(k.Z,{id:"modal",visible:s,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(de,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(Z.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(N.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(n.Z,{children:[(0,e.jsx)(i.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(i.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(i.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(n.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(Me,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:m.map(function(f,p){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.Z,{children:(0,e.jsx)(i.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+_+"?p="+(p+1),children:"\u5207\u7247"+(p+1)})})}),(0,e.jsx)(e.Fragment,{children:f.map(function(D){var y=D.split("|"),X=y[0],C=y[1],M=y[2],oe=parseInt(C.split("-->")[0].split(":")[0]),z=parseInt(C.split("-->")[0].split(":")[1]),Le=parseInt(C.split("-->")[0].split(":")[2].split(",")[0]),Te=(oe*3600+60*z+Le)*1e3,Ae="https://www.bilibili.com/"+_+"?p="+(p+1)+"&start_progress="+Te,xe="";return M.toLowerCase().indexOf(O.toLowerCase())!==-1&&(xe="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(n.Z,{style:{borderBottom:"1px dashed"},className:xe,children:[(0,e.jsx)(i.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:X}),(0,e.jsx)(i.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ae,children:C})}),(0,e.jsx)(i.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(v(),{highlightStyle:{backgroundColor:Ie,padding:0},searchWords:[O],autoEscape:!0,textToHighlight:M})})]})})})})]})})})})]})]})}}]),d}(S.Component);L.default=function(){var u={initColumns:Ze,initDatasrc:H};return(0,e.jsx)(P.ZP,{locale:Oe.Z,children:(0,e.jsx)(Be,(0,Q.Z)({},u))})}}}]);
